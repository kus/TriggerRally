// Generated by CoffeeScript 1.7.1

/*
 * Copyright (C) 2012 jareiko / http://www.jareiko.net/
 */

(function() {
  define(function() {
    return {
      syncSocket: function(socket) {
        return function(method, model, options) {
          socket.emit('sync', {
            method: method,
            url: _.result(model, 'url'),
            urlRoot: _.result(model, 'urlRoot'),
            id: model.id,
            model: model.toJSON()
          }, function(err, response) {
            if (err) {
              if (typeof options.error === "function") {
                options.error(model, err, options);
              }
            } else {
              if (typeof options.success === "function") {
                options.success(response);
              }
            }
          });
        };
      }
    };
  });

}).call(this);
